

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Tutorial &mdash; fstpy 1.0.2 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-dataframe.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-rendered-html.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Conda basics" href="conda_howto.html" />
    <link rel="prev" title="General utilities" href="utils.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/fstpy_logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Start here</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Using fstpy in scripts or Jupyter Lab/Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="std_reader.html">The Standard file reader</a></li>
<li class="toctree-l1"><a class="reference internal" href="std_writer.html">The Standard file writer</a></li>
<li class="toctree-l1"><a class="reference internal" href="std_dec.html">Standard file attribute decoding functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="std_enc.html">Standard file Dataframe attribute encoding functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataframe_utils.html">Standard file Dataframe utility functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">General utilities</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-and-manipulating-the-meta-data">Getting and manipulating the meta data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#get-a-dataframe-from-a-standard-file">Get a dataframe from a standard file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-a-dataframe-from-multiple-standard-files">Get a dataframe from multiple standard files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#see-the-contents-of-the-dataframe">See the contents of the dataframe</a></li>
<li class="toctree-l3"><a class="reference internal" href="#select-sub-sets-of-data">select sub-sets of data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#selecting-by-date-range">selecting by date range</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modify-meta-data">Modify meta data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reformatting-meta-data-for-other-types-or-structures">Reformatting meta data for other types or structures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-data">Working with data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#getting-the-associated-data-for-each-record-in-the-dataframe">Getting the associated data for each record in the dataframe</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#performing-simple-calculations">Performing simple calculations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#wind-modulus">Wind Modulus</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wind-chill">Wind Chill</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-statistics-for-each-record-in-a-dataframe">Basic statistics for each record in a dataframe</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-statistics-for-each-column-of-3d-matrix">Basic statistics for each column of 3d matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-groups-of-data">Getting groups of data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exporting-the-data">Exporting the data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#formats">Formats</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="conda_howto.html">Conda basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">fstpy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/tutorial.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="getting-and-manipulating-the-meta-data">
<h2>Getting and manipulating the meta data<a class="headerlink" href="#getting-and-manipulating-the-meta-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="get-a-dataframe-from-a-standard-file">
<h3>Get a dataframe from a standard file<a class="headerlink" href="#get-a-dataframe-from-a-standard-file" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span>import fstpy.all as fstpy.all as fstpy
# method 1 - to_pandas with explicit instance
std_file = fstpy.StandardFileReader(&#39;/fs/site4/eccc/cmd/w/sbf000/fstpy/source_data_5005.std&#39;)
df = std_file.to_pandas()

# method 2 - to_pandas without explicit instance
df = fstpy.StandardFileReader(&#39;/fs/site4/eccc/cmd/w/sbf000/fstpy/source_data_5005.std&#39;).to_pandas()
</pre></div>
</div>
</div>
<div class="section" id="get-a-dataframe-from-multiple-standard-files">
<h3>Get a dataframe from multiple standard files<a class="headerlink" href="#get-a-dataframe-from-multiple-standard-files" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span>import fstpy.all as fstpy
df = fstpy.StandardFileReader([&#39;/fs/site4/eccc/cmd/w/sbf000/fstpy/source_data_5005.std&#39;,etc...]).to_pandas()
</pre></div>
</div>
</div>
<div class="section" id="see-the-contents-of-the-dataframe">
<h3>See the contents of the dataframe<a class="headerlink" href="#see-the-contents-of-the-dataframe" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span>import fstpy.all as fstpy
df = fstpy.StandardFileReader(&#39;/fs/site4/eccc/cmd/w/sbf000/fstpy/source_data_5005.std&#39;).to_pandas()
# show a summary of the dataframe contentvs
print(df)
#show the first lines of the dataframe
print(df.head())
# show the last rows of the dataframe
print(df.tail())
# show column names of the dataframe
print(df.columns)
# show the levels contained in the dataframe
print(df.level)
# show the unique levels contained in the dataframe
print(df.level.unique())
# show a subset of columns of the dataframe
print(df[[&#39;nomvar&#39;,&#39;typvar&#39;,&#39;etiket&#39;,&#39;ni&#39;,&#39;nj&#39;,&#39;nk&#39;,&#39;dateo&#39;,&#39;ip1&#39;,&#39;ip2&#39;,&#39;ip3&#39;]])
# show a voir like output of the dataframe
fstpy.voir(df)
</pre></div>
</div>
</div>
<div class="section" id="select-sub-sets-of-data">
<h3>select sub-sets of data<a class="headerlink" href="#select-sub-sets-of-data" title="Permalink to this headline">¶</a></h3>
<p><strong>Note</strong>: fstpy.select is a wrapper for pandas.DataFrame.query method</p>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span>import fstpy.all as fstpy
df = fstpy.StandardFileReader(&#39;/fs/site4/eccc/cmd/w/sbf000/fstpy/source_data_5005.std&#39;).to_pandas()
# select TT
sel_tt_df = fstpy.select(df,&#39;nomvar==&quot;TT&quot;&#39;)
# select UU and VV
sel_uuvv_df = fstpy.select(df,&#39;nomvar in [&quot;UU&quot;,&quot;VV&quot;]&#39;)
# select UU and VV with ip2 of 6
sel_uuvv6_df = fstpy.select(df,&#39;(nomvar in [&quot;UU&quot;,&quot;VV&quot;]) and (ip2==6)&#39;)
</pre></div>
</div>
</div>
<div class="section" id="selecting-by-date-range">
<h3>selecting by date range<a class="headerlink" href="#selecting-by-date-range" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span>from datetime import date,datetime
start_date = datetime(2020, 2, 1, 0, 0)
end_date = datetime(2020, 2, 4, 12, 0)
print(start_date,end_date)
mask = df[&#39;date_of_observation&#39;].between(start_date, end_date, inclusive=True)
sub_df = df[mask]
print(sub_df.sort_values(by=[&#39;date_of_observation&#39;]))
</pre></div>
</div>
</div>
<div class="section" id="modify-meta-data">
<h3>Modify meta data<a class="headerlink" href="#modify-meta-data" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span>import fstpy.all as fstpy
df = fstpy.StandardFileReader(&#39;/fs/site4/eccc/cmd/w/sbf000/fstpy/source_data_5005.std&#39;).to_pandas()
# select TT
sel_tt_df = fstpy.select(df,&#39;nomvar==&quot;TT&quot;&#39;)
# change nomvar from TT to TTI
fstpy.zapped_df = fstpy.zap(sel_tt_df,nomvar=&#39;TTI&#39;)
</pre></div>
</div>
</div>
<div class="section" id="reformatting-meta-data-for-other-types-or-structures">
<h3>Reformatting meta data for other types or structures<a class="headerlink" href="#reformatting-meta-data-for-other-types-or-structures" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span>import fstpy.all as fstpy
df = fstpy.StandardFileReader(&#39;/fs/site4/eccc/cmd/w/sbf000/fstpy/source_data_5005.std&#39;).to_pandas()
# changind the column names
translation = {&#39;nomvar&#39;:&#39;fieldName&#39;,&#39;etiket&#39;:&#39;pdsLabel&#39;,&#39;dateo&#39;:&#39;dateOfObservation&#39;}
df.rename(columns= translation, inplace=True)
</pre></div>
</div>
</div>
</div>
<div class="section" id="working-with-data">
<h2>Working with data<a class="headerlink" href="#working-with-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="getting-the-associated-data-for-each-record-in-the-dataframe">
<h3>Getting the associated data for each record in the dataframe<a class="headerlink" href="#getting-the-associated-data-for-each-record-in-the-dataframe" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span>import fstpy.all as fstpy
df = fstpy.StandardFileReader(&#39;/fs/site4/eccc/cmd/w/sbf000/fstpy/source_data_5005.std&#39;).to_pandas()
# we don&#39;t want to get all the data so lets get a subset
uuvv_df = fstpy.select(df,&#39;(nomvar in [&quot;UU&quot;,&quot;VV&quot;]) and (surface==True)&#39;)
tt_df = fstpy.select(df,&#39;(nomvar==&quot;TT&quot;) and (surface==True)&#39;)
# get the data for our new dataframes
# after this operation the &#39;d&#39; column of each dataframe contains a numpy ndarray
uuvv_df = fstpy.load_data(uuvv_df)
tt_df = fstpy.load_data(tt_df)
</pre></div>
</div>
</div>
</div>
<div class="section" id="performing-simple-calculations">
<h2>Performing simple calculations<a class="headerlink" href="#performing-simple-calculations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="wind-modulus">
<h3>Wind Modulus<a class="headerlink" href="#wind-modulus" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span># building on what we&#39;ve selected in the previous code snippet
# first we need the wind modulus (we assume that we have only 1 level in each dataframe)
# let&#39;s separate uu and vv from uuvv_df
uu_df = fstpy.select(uuvv_df,&#39;nomvar==&quot;UU&quot;&#39;)
vv_df = fstpy.select(uuvv_df,&#39;nomvar==&quot;VV&quot;&#39;)

#let&#39;s create a record to hold the result and change the nomvar accordingly
uv_df = vv_df.copy(deep=True)
uv_df = fstpy.zap(uv_df,nomvar=&#39;UV&#39;)

# compute
uu = (uu_df.at[0,&#39;d&#39;]) #at[0,&#39;d&#39;] gets the first row of data from the dataframe
vv = (vv_df.at[0,&#39;d&#39;])

# the algorithm, after this uv_df contains our result for the wind modulus in knots
uv_df.at[0,&#39;d&#39;] = (uu**2 + vv**2)**.5
</pre></div>
</div>
</div>
<div class="section" id="wind-chill">
<h3>Wind Chill<a class="headerlink" href="#wind-chill" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span>import fstpy.all as fstpy
import numpy as np
# at this point we have uv_df and tt_df but uv_df is in knots
# we need to do a unit conversion on uv_df to get it in kph
# print(UNITS) to get a list of units
uv_df = fstpy.do_unit_conversion(uv_df,&#39;kilometer_per_hour&#39;)

# create a record to hold wind chill reseult
re_df = uv_df.copy(deep=True)
re_df = fstpy.zap(re_df, nomvar=&#39;RE&#39;)

# compute
tt = (tt_df.iloc[0,&#39;d&#39;])
uv = (uv_df.iloc[0,&#39;d&#39;])

# the algorithm, after this re_df contains our result for the wind chill in celsius
re_df.at[0,&#39;d&#39;] = np.where( (tt &lt;= 0) &amp; (uv &gt;= 5), 13.12 + 0.6215 * tt + ( 0.3965 * tt - 11.37) * ( uv**0.16 ), tt)
</pre></div>
</div>
</div>
<div class="section" id="basic-statistics-for-each-record-in-a-dataframe">
<h3>Basic statistics for each record in a dataframe<a class="headerlink" href="#basic-statistics-for-each-record-in-a-dataframe" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span>import fstpy.all as fstpy
import pandas as pd
import numpy as np
# read
df = fstpy.StandardFileReader(&#39;/fs/site4/eccc/cmd/w/sbf000/fstpy/source_data_5005.std&#39;).to_pandas()

df = fstpy.select(df,&#39;nomvar==&quot;TT&quot;&#39;)

#load_data
df = fstpy.load_data(df)

# function to calculate stats on each row of the dataframe
# function exists in std.standardfile
def compute_basic_stats(df:pd.DataFrame) -&gt; pd.DataFrame:
    &quot;&quot;&quot; compute for each row in a datarfame, min, max, mean, standard_deviation and the 2d indice of min and max&quot;&quot;&quot;
    df[&#39;min&#39;]=None
    df[&#39;max&#39;]=None
    df[&#39;mean&#39;]=None
    df[&#39;std&#39;]=None
    df[&#39;min_pos&#39;]=None
    df[&#39;max_pos&#39;]=None
    for i in df.index:
        df.at[i,&#39;mean&#39;] = df.loc[i,&#39;d&#39;].mean()
        df.at[i,&#39;std&#39;] = df.loc[i,&#39;d&#39;].std()
        df.at[i,&#39;min&#39;] = df.loc[i,&#39;d&#39;].min()
        df.at[i,&#39;max&#39;] = df.loc[i,&#39;d&#39;].max()
        # index (i,j) of min in record
        df.at[i,&#39;min_pos&#39;] = np.unravel_index(df.at[i,&#39;d&#39;].argmin(), (df.at[i,&#39;ni&#39;],df.at[i,&#39;nj&#39;]))
        df.at[i,&#39;min_pos&#39;] = (df.at[i,&#39;min_pos&#39;][0] + 1, df.at[i,&#39;min_pos&#39;][1]+1)
        # index (i,j) of max in record
        df.at[i,&#39;max_pos&#39;] = np.unravel_index(df.at[i,&#39;d&#39;].argmax(), (df.at[i,&#39;ni&#39;],df.at[i,&#39;nj&#39;]))
        df.at[i,&#39;max_pos&#39;] = (df.at[i,&#39;max_pos&#39;][0] + 1, df.at[i,&#39;max_pos&#39;][1]+1)
    return df

# now the dataframe contains extra columns [mean,std,min,max,min_pos,max_pos] with stats for each record in the dataframe
df = compute_basic_stats(df)
# write the result
from os import getenv
USER = getenv(&quot;USER&quot;)
fstpy.StandardFileWriter(&#39;/tmp/%s/row_stats.std&#39;%USER, df)
</pre></div>
</div>
</div>
<div class="section" id="basic-statistics-for-each-column-of-3d-matrix">
<h3>Basic statistics for each column of 3d matrix<a class="headerlink" href="#basic-statistics-for-each-column-of-3d-matrix" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span>import fstpy.all as fstpy
import pandas as pd
import numpy as np
# read
df = fstpy.StandardFileReader(&#39;/fs/site4/eccc/cmd/w/sbf000/fstpy/source_data_5005.std&#39;).to_pandas()

# get TT
tt_df = fstpy.select(df,&#39;nomvar==&quot;TT&quot;&#39;)

#load_data
tt_df = fstpy.load_data(tt_df)

# flatten arrays of the dataframe since second dimension is&#39;nt necessary
tt_df = fstpy.flatten_data_series(tt_df)

#get a 3d array of TT
array_3d = np.stack(tt_df[&#39;d&#39;].to_list())

# gets the min value of every column
min_arr = np.min(array_3d, axis=0)

# gets the max value of every column
max_arr = np.max(array_3d, axis=0)

# gets the standard deviation value of every column
std_arr = np.std(array_3d, axis=0)

# gets the mean value of every column
mean_arr = np.mean(array_3d, axis=0)

# creates a 1 row dataframe based on a model dataframe
def create_result_df(df:pd.DataFrame, nomvar:str, operation_name:str) -&gt;  pd.DataFrame:
    res_df = fstpy.create_1row_df_from_model(df)
    res_df = fstpy.zap(res_df, nomvar=nomvar, etiket=operation_name)
    return res_df


# create result dataframes
min_df = create_result_df(tt_df,&#39;MIN&#39;,&#39;MINIMUM&#39;)
max_df = create_result_df(tt_df,&#39;MAX&#39;,&#39;MAXIMUM&#39;)
std_df = create_result_df(tt_df,&#39;STD&#39;,&#39;STDDEV&#39;)
mean_df = create_result_df(tt_df,&#39;MEAN&#39;,&#39;AVERAGE&#39;)

# assign resulting arrays to the dataframes
# .at gets the row at index in a dataframe, we have 1 row dataframes in each case and our arrays are simple 2d result arrays
min_df.at[0,&#39;d&#39;] = min_arr
max_df.at[0,&#39;d&#39;] = max_arr
std_df.at[0,&#39;d&#39;] = std_arr
mean_df.at[0,&#39;d&#39;] = mean_arr

# combine all results into a single dataframe
res_df = pd.concat([min_df,max_df,std_df,mean_df])

# write the result
from os import getenv
USER = getenv(&quot;USER&quot;)
fstpy.StandardFileWriter(&#39;/tmp/%s/column_stats.std&#39;%USER, res_df).to_fst()
</pre></div>
</div>
</div>
<div class="section" id="getting-groups-of-data">
<h3>Getting groups of data<a class="headerlink" href="#getting-groups-of-data" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span>import fstpy.all as fstpy

df = fstpy.StandardFileReader(&#39;/fs/site4/eccc/cmd/w/sbf000/fstpy/source_data_5005.std&#39;).to_pandas()

tt_df = fstpy.select(df,&#39;nomvar==&quot;TT&quot;&#39;)

# grouping data by grid, the usual case when you have multiple grids in a dataframe
grid_groups_list = fstpy.get_groups(tt_df,group_by_forecast_hour=False,group_by_level=False)

for grid_df in grid_groups_list:
    print(grid_df)

# grouping data by forecast hour, the usual case when you have multiple forecast hours per grid in a dataframe
forecast_hour_groups_list = fstpy.get_groups(tt_df,group_by_forecast_hour=True,group_by_level=False)

for forecast_hour_df in forecast_hour_groups_list :
    print(forecast_hour_df)

# grouping data by level, the usual case when you have multiple levels per grid in a dataframe
levels_groups_list = fstpy.get_groups(tt_df,group_by_forecast_hour=True,group_by_level=True)

for level_df in levels_groups_list:
    print(level_df)
</pre></div>
</div>
</div>
</div>
<div class="section" id="exporting-the-data">
<h2>Exporting the data<a class="headerlink" href="#exporting-the-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="formats">
<h3>Formats<a class="headerlink" href="#formats" title="Permalink to this headline">¶</a></h3>
<p>With fstpy</p>
<ol class="arabic">
<li><p>Rpn standard file</p>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span>import fstpy.all as fstpy

df = fstpy.StandardFileReader(&#39;/fs/site4/eccc/cmd/w/sbf000/fstpy/source_data_5005.std&#39;).to_pandas()

# select TT only from input
tt_df = fstpy.select(df,&#39;nomvar==&quot;TT&quot;&#39;)

# this will write the dataframe to the output file, if no data was fstpy.load_datad, the class will do it
from os import getenv
USER = getenv(&quot;USER&quot;)
std_file = fstpy.StandardFileWriter(&#39;/tmp/%s/TT.std&#39;%USER, tt_df)
std_file.to_fst()
</pre></div>
</div>
<p>With <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html">pandas io - many other formats
available</a></p>
</li>
<li><p>Pickle</p>
<div class="highlight-ptyhon notranslate"><div class="highlight"><pre><span></span>import fstpy.all as fstpy

df = fstpy.StandardFileReader(&#39;/fs/site4/eccc/cmd/w/sbf000/fstpy/source_data_5005.std&#39;).to_pandas()

# select TT only from input
tt_df = fstpy.select(df,&#39;nomvar==&quot;TT&quot;&#39;)

# this will write the complete dataframe to the compressed output file, if no data was fstpy.load_datad no data will be written,
# &#39;d&#39; column will be None
from os import getenv
USER = getenv(&quot;USER&quot;)
df.to_pickle(&quot;/tmp/%s/pickle_data.pkl.bz2&quot;%USER)
</pre></div>
</div>
</li>
</ol>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="conda_howto.html" class="btn btn-neutral float-right" title="Conda basics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="utils.html" class="btn btn-neutral float-left" title="General utilities" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Sébastien Fortier.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>