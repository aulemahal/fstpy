#+TITLE_: USAGE
#+OPTIONS: toc:1

** Using fstpy in scripts or Jupyter Lab/Notebook 
*** Use pre-build developpement environment
  #+BEGIN_SRC sh
    # get rmn python library      
    . r.load.dot eccc/mrd/rpn/MIG/ENV/migdep/5.1.1 eccc/mrd/rpn/MIG/ENV/rpnpy/2.1.2      
    # get fstpy ssm package
    . ssmuse-sh -d /fs/ssm/eccc/cmd/cmds/fstpy/_VERSION_/
  #+END_SRC
*** Use pre-build developpement environment
  #+BEGIN_SRC sh
    # get conda if you don't already have it  
    . ssmuse-sh -x cmd/cmdm/satellite/master_u1/miniconda3_4.9.2_ubuntu-18.04-skylake-64   
    # create a link to pre-built environment
    cd ~/.conda/envs/
    ln -s ~sgci800/.conda/envs/fstpy_full
    # whenever you need to use this environment on science run the following (if you have'nt loaded the conda ssm, you'll need to do it everytime)
    # unless you put it in your profile
    # activate your conda environment     
    . activate fstpy_full     
    # get rmn python library      
    . r.load.dot eccc/mrd/rpn/MIG/ENV/migdep/5.1.1 eccc/mrd/rpn/MIG/ENV/rpnpy/2.1.2      
    # get fstpy ssm package
    . ssmuse-sh -d /fs/ssm/eccc/cmd/cmds/fstpy/_VERSION_/
  #+END_SRC
*** Use fstpy
  #+BEGIN_SRC python
    # inside your script    
    import fstpy.all as fstpy   
    df = fstpy.StandardFileReader('path to my fst file').to_pandas()
  #+END_SRC

*** Example   
  #+BEGIN_SRC python
    data_path = prefix + '/data/'    
    import fstpy.all as fstpy
    # setup your file to read    
    records=fstpy.StandardFileReader(data_path + 'ttuvre.std').to_pandas()    
    # display selected records in a rpn voir format    
    fstpy.voir(records)    
    # get statistics on the selected records    
    df = fstpy.fststat(records)    
    # get a subset of records containing only UU and VV momvar    
    just_tt_and_uv = fstpy.select(records,'nomvar in ["TT","UV"]')    
    # display selected records in a rpn voir format   
    fstpy.voir(just_tt_and_uv)    
    dest_path = '/tmp/out.std'    
    # write the selected records to the output file    
    fstpy.StandardFileWriter(dest_path,just_tt_and_uv).to_fst()    
  #+END_SRC